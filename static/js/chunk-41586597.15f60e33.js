(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-41586597"],{"7e05":function(e,t,a){},a6e4:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-steps",{attrs:{active:e.stepActivate,"align-center":""}},[a("el-step",{attrs:{title:"填写基本信息",icon:"el-icon-edit"}}),a("el-step",{attrs:{title:"上传相关附件",icon:"el-icon-upload"}}),a("el-step",{attrs:{title:"检查确认",icon:"el-icon-picture"}})],1),a("div",{staticStyle:{display:"flex","justify-content":"space-around"}},[e.stepActivate>=1?a("el-button",{staticStyle:{"margin-top":"12px"},on:{click:function(t){e.stepActivate-=1}}},[e._v("上一步")]):e._e(),e.stepActivate<=1?a("el-button",{staticStyle:{"margin-top":"12px"},on:{click:function(t){e.stepActivate+=1}}},[e._v("下一步")]):e._e()],1),a("el-divider"),a("el-form",{ref:"form",attrs:{model:e.paperForm,"label-width":"120px"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:0==e.stepActivate,expression:"stepActivate == 0"}]},[a("el-form-item",{attrs:{label:"标题"}},[a("el-input",{model:{value:e.paperForm.title,callback:function(t){e.$set(e.paperForm,"title",t)},expression:"paperForm.title"}})],1),a("el-form-item",{attrs:{label:"第一作者"}},[a("el-select",{attrs:{filterable:"",remote:"","remote-method":e.remoteMethod,loading:e.paperTypeLoading,placeholder:"请输入第一作者"},model:{value:e.paperForm.firstAuthor,callback:function(t){e.$set(e.paperForm,"firstAuthor",t)},expression:"paperForm.firstAuthor"}},e._l(e.firstAuthorList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.realName,value:t.id}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.realName))]),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.email))])])})),1)],1),a("el-form-item",{attrs:{label:"文章类别"}},[a("PaperCategorySingle",{model:{value:e.paperForm.typeId,callback:function(t){e.$set(e.paperForm,"typeId",t)},expression:"paperForm.typeId"}})],1),a("el-form-item",{attrs:{label:"其他作者"}},[a("el-input",{model:{value:e.paperForm.otherAuthor,callback:function(t){e.$set(e.paperForm,"otherAuthor",t)},expression:"paperForm.otherAuthor"}})],1),a("el-form-item",{attrs:{label:"关键字"}},[a("el-input",{model:{value:e.paperForm.primaryKey,callback:function(t){e.$set(e.paperForm,"primaryKey",t)},expression:"paperForm.primaryKey"}})],1),a("el-form-item",{attrs:{label:"摘要"}},[a("el-input",{attrs:{autosize:"",type:"textarea"},model:{value:e.paperForm.abstractContext,callback:function(t){e.$set(e.paperForm,"abstractContext",t)},expression:"paperForm.abstractContext"}})],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:1==e.stepActivate,expression:"stepActivate == 1"}]},[a("el-form-item",{attrs:{label:"上传论文文件"}},[a("el-upload",{staticClass:"upload-demo",attrs:{drag:"",data:e.paperFileData,"file-list":e.paperFileList,"before-upload":e.handleBeforePaperUpload,"on-success":e.handlePaperUploadSuccess,action:"https://paper-submission.oss-cn-shanghai.aliyuncs.com"}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),a("em",[e._v("点击上传")])]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传pdf/docx文件，大小限制100MB")])])],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:2==e.stepActivate,expression:"stepActivate == 2"}]},[a("el-button",{on:{click:e.submitPaper}},[e._v("提交论文")])],1)])],1)},s=[],o=a("c7eb"),i=a("1da1"),n=(a("b0c0"),a("ec26")),p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-select",{attrs:{value:e.value,placeholder:" 请选择类别"},on:{input:function(t){return e.$emit("input",t)}}},e._l(e.paperTypes,(function(e){return a("el-option",{key:e.id,attrs:{label:e.typeName,value:e.id}})})),1)},c=[],l={name:"PaperCategorySingle",props:{},data:function(){return{paperTypes:[]}},created:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$API.paperType();case 2:e.paperTypes=t.sent.data;case 3:case"end":return t.stop()}}),t)})))()},methods:{selectChanged:function(e){this.typeid=e}}},u=l,d=a("2877"),m=Object(d["a"])(u,p,c,!1,null,null,null),f=m.exports,h={name:"Submit",components:{PaperCategorySingle:f},data:function(){return{paperFileList:[],firstAuthorList:[],paperTypeLoading:!1,paperTypes:[],stepActivate:0,paperForm:{title:"",firstAuthor:"",otherAuthor:"",primaryKey:"",abstractContext:"",paperUrl:"",typeId:""},paperFileData:{},ossPolicy:{}}},computed:{},created:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$API.paperType();case 2:return e.paperTypes=t.sent.data,t.next=5,e.$store.dispatch("service/OSSPolicy");case 5:case"end":return t.stop()}}),t)})))()},methods:{submitPaper:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){var a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$API.paperSubmit(e.paperForm);case 2:a=t.sent,200===a.code&&e.$message.success("论文提交成功");case 4:case"end":return t.stop()}}),t)})))()},handleBeforePaperUpload:function(e){var t=this;return Object(i["a"])(Object(o["a"])().mark((function a(){return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return console.log(e),a.next=3,t.$API.getOSSPolicy();case 3:t.ossPolicy=a.sent.data,t.paperFileData={key:t.ossPolicy.dir+Object(n["a"])()+e.name,policy:t.ossPolicy.policy,OSSAccessKeyId:t.ossPolicy.accessid,success_action_status:"200",signature:t.ossPolicy.signature};case 5:case"end":return a.stop()}}),a)})))()},handlePaperUploadSuccess:function(e,t){this.$message.success("文件上传成功"),this.paperForm.paperUrl=this.ossPolicy.host+"/"+this.paperFileData.key,console.log(e,t)},onSubmit:function(){this.$message("submit!")},onCancel:function(){this.$message({message:"cancel!",type:"warning"})},remoteMethod:function(e){var t=this;""!==e?(this.paperTypeLoading=!0,setTimeout(Object(i["a"])(Object(o["a"])().mark((function e(){return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.paperTypeLoading=!1,e.next=3,t.$API.searchUser(t.paperForm.firstAuthor);case 3:t.firstAuthorList=e.sent.data;case 4:case"end":return e.stop()}}),e)}))),200)):this.options=[]}}},v=h,y=(a("ccf8"),Object(d["a"])(v,r,s,!1,null,"6b7dd016",null));t["default"]=y.exports},ccf8:function(e,t,a){"use strict";a("7e05")},ec26:function(e,t,a){"use strict";var r,s=new Uint8Array(16);function o(){if(!r&&(r="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),!r))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(s)}var i=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function n(e){return"string"===typeof e&&i.test(e)}for(var p=n,c=[],l=0;l<256;++l)c.push((l+256).toString(16).substr(1));function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=(c[e[t+0]]+c[e[t+1]]+c[e[t+2]]+c[e[t+3]]+"-"+c[e[t+4]]+c[e[t+5]]+"-"+c[e[t+6]]+c[e[t+7]]+"-"+c[e[t+8]]+c[e[t+9]]+"-"+c[e[t+10]]+c[e[t+11]]+c[e[t+12]]+c[e[t+13]]+c[e[t+14]]+c[e[t+15]]).toLowerCase();if(!p(a))throw TypeError("Stringified UUID is invalid");return a}var d=u;function m(e,t,a){e=e||{};var r=e.random||(e.rng||o)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){a=a||0;for(var s=0;s<16;++s)t[a+s]=r[s];return t}return d(r)}t["a"]=m}}]);